<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>å°ˆæ¥­æ·±è‰²èƒŒæ™¯æª¢æŸ¥ç¨‹å¼</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dreamy-dynamic-theme.css">
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #ffc371 100%);
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 24px;
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 50%, #F59E0B 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }
        
        .check-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: white;
        }
        
        .check-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .console-output {
            background: rgba(0, 0, 0, 0.8);
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            padding: 15px;
            border-radius: 8px;
            height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin: 15px 0;
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .action-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 50%, #F59E0B 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }
        
        .status-indicator {
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 600;
        }
        
        .status-success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #10b981;
        }
        
        .status-error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }
        
        .status-warning {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #f59e0b;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">åˆ‡æ›ä¸»é¡Œ</button>
    
    <div class="test-container">
        <h1 style="color: white; text-align: center; margin-bottom: 20px;">å°ˆæ¥­æ·±è‰²èƒŒæ™¯æª¢æŸ¥ç¨‹å¼</h1>
        
        <div class="check-panel">
            <h2 class="check-title">ğŸ” æª¢æŸ¥æ§åˆ¶é¢æ¿</h2>
            <div class="action-buttons">
                <button class="action-btn" onclick="runCheck()">ğŸš€ é‹è¡Œå®Œæ•´æª¢æŸ¥</button>
                <button class="action-btn" onclick="runBackgroundCheck()">ğŸ¯ æª¢æŸ¥èƒŒæ™¯è¨­å®š</button>
                <button class="action-btn" onclick="forceApplyBackground()">ğŸ”§ å¼·åˆ¶æ‡‰ç”¨èƒŒæ™¯</button>
                <button class="action-btn" onclick="clearConsole()">ğŸ—‘ï¸ æ¸…é™¤æ§åˆ¶å°</button>
            </div>
            
            <div id="statusPanel">
                <div class="status-indicator status-warning">
                    ğŸ“ é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æª¢æŸ¥
                </div>
            </div>
            
            <div class="console-output" id="consoleOutput">
                æ§åˆ¶å°è¼¸å‡ºå°‡é¡¯ç¤ºåœ¨é€™è£¡...
            </div>
        </div>
        
        <!-- æ¸¬è©¦å¡ç‰‡ -->
        <div class="cards-grid">
            <!-- å°ç©é›»æŠ•è³‡å¡ç‰‡ -->
            <div class="investment-card" style="padding: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                    <div>
                        <div class="stock-name">å°ç©é›»</div>
                        <div class="stock-code">2330</div>
                    </div>
                    <div style="text-align: right;">
                        <div class="current-price">1,775.00</div>
                    </div>
                </div>
                
                <div style="margin: 16px 0;">
                    <div class="yesterday-close">æ˜¨æ”¶ 1,760.00</div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="share-count">24 è‚¡</div>
                    <div class="price-change">
                        <span class="arrow">â–²</span>+15.00 (+0.85%)
                    </div>
                </div>
            </div>
            
            <!-- é´»æµ·ç²¾å¯†æŠ•è³‡å¡ç‰‡ -->
            <div class="investment-card" style="padding: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                    <div>
                        <div class="stock-name">é´»æµ·ç²¾å¯†</div>
                        <div class="stock-code">2317</div>
                    </div>
                    <div style="text-align: right;">
                        <div class="current-price">142.50</div>
                    </div>
                </div>
                
                <div style="margin: 16px 0;">
                    <div class="yesterday-close">æ˜¨æ”¶ 140.00</div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="share-count">100 è‚¡</div>
                    <div class="price-change positive">
                        <span class="arrow">â–²</span>+2.50 (+1.79%)
                    </div>
                </div>
            </div>
            
            <!-- å°ç©é›»æŒæœ‰å¡ç‰‡ -->
            <div class="holding-card" style="padding: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                    <div>
                        <div class="stock-name">å°ç©é›»</div>
                        <div class="stock-code">2330</div>
                    </div>
                    <div style="text-align: right;">
                        <div class="current-price">1,775.00</div>
                    </div>
                </div>
                
                <div style="margin: 16px 0;">
                    <div class="yesterday-close">æ˜¨æ”¶ 1,760.00</div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="share-count">æŒæœ‰ 24 è‚¡</div>
                    <div class="price-change positive">
                        <span class="arrow">â–²</span>+15.00 (+0.85%)
                    </div>
                </div>
            </div>
            
            <!-- é´»æµ·ç²¾å¯†æŒæœ‰å¡ç‰‡ -->
            <div class="holding-card" style="padding: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                    <div>
                        <div class="stock-name">é´»æµ·ç²¾å¯†</div>
                        <div class="stock-code">2317</div>
                    </div>
                    <div style="text-align: right;">
                        <div class="current-price">142.50</div>
                    </div>
                </div>
                
                <div style="margin: 16px 0;">
                    <div class="yesterday-close">æ˜¨æ”¶ 140.00</div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="share-count">æŒæœ‰ 100 è‚¡</div>
                    <div class="price-change positive">
                        <span class="arrow">â–²</span>+2.50 (+1.79%)
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="background-check.js"></script>
    <script>
        let isDreamyDynamic = false;
        
        function toggleTheme() {
            isDreamyDynamic = !isDreamyDynamic;
            if (isDreamyDynamic) {
                document.documentElement.setAttribute('data-theme', 'dreamy-dynamic');
                document.querySelector('.theme-toggle').textContent = 'é—œé–‰ä¸»é¡Œ';
            } else {
                document.documentElement.removeAttribute('data-theme');
                document.querySelector('.theme-toggle').textContent = 'åˆ‡æ›ä¸»é¡Œ';
            }
        }
        
        function runCheck() {
            clearConsole();
            updateStatus('info', 'ğŸš€ æ­£åœ¨é‹è¡Œå®Œæ•´æª¢æŸ¥...');
            
            setTimeout(() => {
                if (window.runFullCheck) {
                    const success = window.runFullCheck();
                    updateStatus(success ? 'success' : 'error', 
                        success ? 'âœ… æª¢æŸ¥å®Œæˆ - å°ˆæ¥­æ·±è‰²èƒŒæ™¯æ­£å¸¸å·¥ä½œ' : 'âŒ æª¢æŸ¥å¤±æ•— - è«‹æŸ¥çœ‹æ§åˆ¶å°è¼¸å‡º');
                } else {
                    updateStatus('error', 'âŒ æª¢æŸ¥ç¨‹å¼æœªè¼‰å…¥');
                }
            }, 100);
        }
        
        function runBackgroundCheck() {
            clearConsole();
            updateStatus('info', 'ğŸ¯ æ­£åœ¨æª¢æŸ¥èƒŒæ™¯è¨­å®š...');
            
            setTimeout(() => {
                if (window.checkProfessionalDarkBackground) {
                    const success = window.checkProfessionalDarkBackground();
                    updateStatus(success ? 'success' : 'error', 
                        success ? 'âœ… èƒŒæ™¯æª¢æŸ¥å®Œæˆ' : 'âŒ èƒŒæ™¯æª¢æŸ¥å¤±æ•—');
                } else {
                    updateStatus('error', 'âŒ èƒŒæ™¯æª¢æŸ¥ç¨‹å¼æœªè¼‰å…¥');
                }
            }, 100);
        }
        
        function forceApplyBackground() {
            clearConsole();
            updateStatus('info', 'ğŸ”§ æ­£åœ¨å¼·åˆ¶æ‡‰ç”¨æ·±è‰²èƒŒæ™¯...');
            
            setTimeout(() => {
                if (window.forceApplyDarkBackground) {
                    window.forceApplyDarkBackground();
                    updateStatus('success', 'âœ… å¼·åˆ¶æ‡‰ç”¨å®Œæˆ');
                    
                    // é‡æ–°æª¢æŸ¥
                    setTimeout(() => {
                        runBackgroundCheck();
                    }, 500);
                } else {
                    updateStatus('error', 'âŒ å¼·åˆ¶æ‡‰ç”¨ç¨‹å¼æœªè¼‰å…¥');
                }
            }, 100);
        }
        
        function clearConsole() {
            const consoleOutput = document.getElementById('consoleOutput');
            consoleOutput.textContent = 'æ§åˆ¶å°è¼¸å‡ºå°‡é¡¯ç¤ºåœ¨é€™è£¡...\n';
        }
        
        function updateStatus(type, message) {
            const statusPanel = document.getElementById('statusPanel');
            const statusDiv = document.createElement('div');
            statusDiv.className = `status-indicator status-${type}`;
            statusDiv.textContent = message;
            
            statusPanel.innerHTML = '';
            statusPanel.appendChild(statusDiv);
        }
        
        // é‡å®šå‘æ§åˆ¶å°è¼¸å‡º
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        function setupConsoleRedirect() {
            const consoleOutput = document.getElementById('consoleOutput');
            
            console.log = function(...args) {
                originalLog.apply(console, args);
                const message = args.join(' ');
                const timestamp = new Date().toLocaleTimeString();
                consoleOutput.textContent += `[${timestamp}] ${message}\n`;
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            };
            
            console.warn = function(...args) {
                originalWarn.apply(console, args);
                const message = args.join(' ');
                const timestamp = new Date().toLocaleTimeString();
                consoleOutput.textContent += `[${timestamp}] âš ï¸ ${message}\n`;
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            };
            
            console.error = function(...args) {
                originalError.apply(console, args);
                const message = args.join(' ');
                const timestamp = new Date().toLocaleTimeString();
                consoleOutput.textContent += `[${timestamp}] âŒ ${message}\n`;
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            };
        }
        
        // è‡ªå‹•æ‡‰ç”¨ä¸»é¡Œä¸¦è¨­ç½®æ§åˆ¶å°é‡å®šå‘
        document.addEventListener('DOMContentLoaded', function() {
            toggleTheme();
            setupConsoleRedirect();
            
            // è‡ªå‹•é‹è¡Œæª¢æŸ¥
            setTimeout(() => {
                runCheck();
            }, 1000);
        });
    </script>
</body>
</html>
